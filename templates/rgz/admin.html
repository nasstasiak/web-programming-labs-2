{% extends "base.html" %}
{% block lab %}Администрирование книг{% endblock %}
{% block script %}
<link rel="stylesheet" href="{{ url_for('static', filename='rgz/rgz.css') }}">
{% endblock %}
{% block main %}
<a href="/index">&#128072;</a>
<h2>Управление книгами</h2>

<!-- Фильтры -->
<form id="filter-form">
    <label for="filter-title">Название:</label>
    <input type="text" id="filter-title" name="title">

    <!-- Фильтр по авторам -->
    <label for="filter-author">Автор:</label>
    <button type="button" id="filter-author-button">Выбрать автора</button>
    <div id="filter-author-dropdown" class="dropdown">
        <!-- Чекбоксы для авторов -->
        <div id="filter-author-checkboxes"></div>
        <button type="button" onclick="applyAuthorFilter()" class="apply-button" style="transform: translateX(-50%); margin-left: 50%;">Применить</button>
    </div>

    <!-- Фильтр по издательствам -->
    <label for="filter-publisher">Издательство:</label>
    <button type="button" id="filter-publisher-button">Выбрать издательство</button>
    <div id="filter-publisher-dropdown" class="dropdown">
        <!-- Чекбоксы для издательств -->
        <div id="filter-publisher-checkboxes"></div>
        <button type="button" onclick="applyPublisherFilter()" class="apply-button" style="transform: translateX(-50%); margin-left: 50%;">Применить</button>
    </div>

    <label for="filter-pages-from">Страницы от:</label>
    <input type="number" id="filter-pages-from" name="pages_from">
    <label for="filter-pages-to">Страницы до:</label>
    <input type="number" id="filter-pages-to" name="pages_to">

    <button type="submit">Применить фильтр</button>
    <button type="button" onclick="clearFilters()">Очистить фильтр</button>
</form>

<!-- Сортировка -->
<label for="sort-by">Сортировать по:</label>
<select id="sort-by" onchange="applySorting()">
    <option value="id">ID</option>
    <option value="title">Название</option>
    <option value="author">Автор</option>
    <option value="pages">Страницы</option>
    <option value="publisher">Издательство</option>
</select>

<!-- Таблица книг -->
<table border="1">
    <thead>
        <tr>
            <th>Обложка</th>
            <th>Название</th>
            <th>Автор</th>
            <th>Страницы</th>
            <th>Издательство</th>
            <th>URL обложки</th> <!-- URL обложки -->
            <th>Действия</th> <!-- Кнопки редактирования и удаления -->
        </tr>
    </thead>
    <tbody id="books">
        <!-- Здесь будут отображаться книги -->
    </tbody>
</table>

<!-- Пагинация -->
<div class="pagination" id="pagination">
    <!-- Здесь будут кнопки для страниц -->
</div>

<h2>Добавить книгу</h2>
<form id="add-book-form">
    <label for="title">Название:</label>
    <input type="text" id="title" name="title" required><br>
    <label for="author">Автор:</label>
    <input type="text" id="author" name="author" required><br>
    <label for="pages">Страницы:</label>
    <input type="number" id="pages" name="pages" required><br>
    <label for="publisher">Издательство:</label>
    <input type="text" id="publisher" name="publisher" required><br>
    <label for="cover_image">URL обложки:</label>
    <input type="text" id="cover_image" name="cover_image" required><br>
    <button type="submit">Добавить книгу</button>
</form>

<br><br><br>

<script src="{{ url_for('static', filename='rgz/admin.js') }}"></script>
{% endblock %}